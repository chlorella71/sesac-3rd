<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<body>
<!-- 포스트 상세 컨텐츠 Fragment -->
<div th:fragment="postContent(post)">
    <div class="card mb-4">
        <div class="card-header d-flex justify-content-between align-items-center">
            <h1 class="mb-0" th:text="${post.title}">포스트 제목</h1>
            <span th:if="${post.draft}" class="badge bg-secondary">초안</span>
        </div>
        <div class="card-body">
            <!-- 포스트 메타데이터 -->
            <div class="post-metadata d-flex justify-content-between mb-4">
                <div>
                        <span class="badge bg-light text-dark">
                            카테고리: <span th:text="${post.categoryName}">카테고리</span>
                        </span>
                    <span class="badge bg-light text-dark ms-2">
                            폴더: <span th:text="${post.folderName}">폴더</span>
                        </span>
                </div>
                <div class="text-muted">
                    <small>
                        작성: <span th:text="${post.formattedRegdate}">작성일</span>
                        <span th:if="${post.formattedModifydate != null && !post.formattedModifydate.isEmpty()}" th:text="'| 수정: ' + ${post.formattedModifydate}"></span>
                    </small>
                </div>
            </div>

            <!-- 포스트 내용 -->
            <div class="post-content my-4" style="white-space: pre-line;" th:text="${post.content}">
                포스트 내용이 여기에 표시됩니다.
            </div>

            <!-- 작성자용 버튼 -->
            <div class="d-flex justify-content-end mt-4" sec:authorize="isAuthenticated()" th:if="${#authentication.principal.username == post.email}">
                <a th:href="@{|/blog/${post.blogId}/post/${post.id}/edit|}" class="btn btn-outline-primary me-2">
                    <i class="bi bi-pencil"></i> 수정
                </a>
                <a href="javascript:void(0);" th:data-uri="@{|/blog/${post.blogId}/post/${post.id}/delete|}" class="btn btn-outline-danger delete">
                    <i class="bi bi-trash"></i> 삭제
                </a>
            </div>
        </div>
        <div class="card-footer">
            <a href="javascript:void(0);" class="btn btn-outline-secondary back-to-blog" th:data-blog-id="${post.blogId}">
                <i class="bi bi-arrow-left"></i> 블로그로 돌아가기
            </a>
        </div>
    </div>
</div>
</body>
</html>